<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: logic.logic.Controller Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>logic</b></li><li class="navelem"><b>logic</b></li><li class="navelem"><a class="el" href="classlogic_1_1logic_1_1Controller.html">Controller</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classlogic_1_1logic_1_1Controller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">logic.logic.Controller Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A logic <a class="el" href="classlogic_1_1logic_1_1Controller.html" title="A logic Controller to control the robot&#39;s movements based on received messages and data.">Controller</a> to control the robot's movements based on received messages and data.  
 <a href="classlogic_1_1logic_1_1Controller.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for logic.logic.Controller:</div>
<div class="dyncontent">
<div class="center"><img src="classlogic_1_1logic_1_1Controller__inherit__graph.png" border="0" usemap="#alogic_8logic_8Controller_inherit__map" alt="Inheritance graph"/></div>
<map name="alogic_8logic_8Controller_inherit__map" id="alogic_8logic_8Controller_inherit__map">
<area shape="rect" title="A logic Controller to control the robot&#39;s movements based on received messages and data." alt="" coords="5,80,145,107"/>
<area shape="rect" title=" " alt="" coords="49,5,102,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for logic.logic.Controller:</div>
<div class="dyncontent">
<div class="center"><img src="classlogic_1_1logic_1_1Controller__coll__graph.png" border="0" usemap="#alogic_8logic_8Controller_coll__map" alt="Collaboration graph"/></div>
<map name="alogic_8logic_8Controller_coll__map" id="alogic_8logic_8Controller_coll__map">
<area shape="rect" title="A logic Controller to control the robot&#39;s movements based on received messages and data." alt="" coords="5,80,145,107"/>
<area shape="rect" title=" " alt="" coords="49,5,102,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aad8d9319cb5460758a8982ec88fdad89"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlogic_1_1logic_1_1Controller.html#aad8d9319cb5460758a8982ec88fdad89">__init__</a> (self)</td></tr>
<tr class="memdesc:aad8d9319cb5460758a8982ec88fdad89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new <a class="el" href="classlogic_1_1logic_1_1Controller.html" title="A logic Controller to control the robot&#39;s movements based on received messages and data.">Controller</a> instance.  <a href="classlogic_1_1logic_1_1Controller.html#aad8d9319cb5460758a8982ec88fdad89">More...</a><br /></td></tr>
<tr class="separator:aad8d9319cb5460758a8982ec88fdad89"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a6a21c8523b2a67b4e75756510f5e5e97"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlogic_1_1logic_1_1Controller.html#a6a21c8523b2a67b4e75756510f5e5e97">error_callback</a> (self, msg)</td></tr>
<tr class="memdesc:a6a21c8523b2a67b4e75756510f5e5e97"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error callback function to get the error message and set the error variable to true if the function gets called.  <a href="classlogic_1_1logic_1_1Controller.html#a6a21c8523b2a67b4e75756510f5e5e97">More...</a><br /></td></tr>
<tr class="separator:a6a21c8523b2a67b4e75756510f5e5e97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a021fc3633915f43d94fad0e797e91d39"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlogic_1_1logic_1_1Controller.html#a021fc3633915f43d94fad0e797e91d39">object_callback</a> (self, msg)</td></tr>
<tr class="memdesc:a021fc3633915f43d94fad0e797e91d39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Object callback function to get the object message and set the velocity in x direction to the negative value of the object velocity.  <a href="classlogic_1_1logic_1_1Controller.html#a021fc3633915f43d94fad0e797e91d39">More...</a><br /></td></tr>
<tr class="separator:a021fc3633915f43d94fad0e797e91d39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab98931a0c7ac62034cc7e33e04fa37d3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classlogic_1_1logic_1_1Controller.html#ab98931a0c7ac62034cc7e33e04fa37d3">robotPosition_callback</a> (self, msg_in)</td></tr>
<tr class="memdesc:ab98931a0c7ac62034cc7e33e04fa37d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Robot position callback function to get the robot position message and set the robot position in dependence of the current state.  <a href="classlogic_1_1logic_1_1Controller.html#ab98931a0c7ac62034cc7e33e04fa37d3">More...</a><br /></td></tr>
<tr class="separator:ab98931a0c7ac62034cc7e33e04fa37d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A logic <a class="el" href="classlogic_1_1logic_1_1Controller.html" title="A logic Controller to control the robot&#39;s movements based on received messages and data.">Controller</a> to control the robot's movements based on received messages and data. </p>
<p>The Logic <a class="el" href="classlogic_1_1logic_1_1Controller.html" title="A logic Controller to control the robot&#39;s movements based on received messages and data.">Controller</a> class represents the main logic for controlling the robot's movements. The node is responsible for controling the robot's behavior, which includes fetching and picking up objects from a conveyor belt, moving to specific positions, and handling error states. It subscribes to several ROS2 messages to receive information about the robot's state, the velocity of the conveyor belt, and the current position of the robot. It also publishes ROS2 messages to command the robot's movements. The logic includes:</p><ul>
<li>Moving the robot to the initialize position after start.</li>
<li>Moving the robot to the desired positions.</li>
<li>Sorting the objects in the boxes. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aad8d9319cb5460758a8982ec88fdad89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad8d9319cb5460758a8982ec88fdad89">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def logic.logic.Controller.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new <a class="el" href="classlogic_1_1logic_1_1Controller.html" title="A logic Controller to control the robot&#39;s movements based on received messages and data.">Controller</a> instance. </p>
<p><br  />
 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">__box_cat_x</td><td>X position of the box for the cat. </td></tr>
    <tr><td class="paramname">box_unicorn_x</td><td>X position of the box for the unicorn. </td></tr>
    <tr><td class="paramname">box_y</td><td>Y position of the box, which is the same for both the unicorn and the cat. </td></tr>
    <tr><td class="paramname">wait</td><td>Array with three values for the waiting position of the robot, which is central over the conveyor belt. </td></tr>
    <tr><td class="paramname">pickup_z</td><td>Z position for the object pickup position from the conveyor belt. </td></tr>
    <tr><td class="paramname">y_enabled_z</td><td>Z height to enable the y-axis movement if the z value is equal to or higher than this height. </td></tr>
    <tr><td class="paramname">error</td><td>Variable to check if an error occurred. </td></tr>
    <tr><td class="paramname">time</td><td>Variable to save the time of the object callback. </td></tr>
    <tr><td class="paramname">type</td><td>Variable to save the type of the object callback. For a cat, the value is 0, and for a unicorn, the value is 1. </td></tr>
    <tr><td class="paramname">state</td><td>Variable to save the current state and robot movement of the controller. </td></tr>
    <tr><td class="paramname">msg_out</td><td>ROS2 message to publish the desired robot position. </td></tr>
    <tr><td class="paramname">init_time</td><td>Variable to save the time of the init state. </td></tr>
    <tr><td class="paramname">init_duration</td><td>Variable to save the duration of the init state. This is set to 10 seconds, allowing enough time for every motor to drive to the init position. </td></tr>
    <tr><td class="paramname">position</td><td>Array to store the robot's current x and y positions. </td></tr>
    <tr><td class="paramname">reference</td><td>Array to store the current reference positions for x, y, and z axes. </td></tr>
    <tr><td class="paramname">error_subscriber</td><td>ROS2 subscription for the error state messages from the Error topic. </td></tr>
    <tr><td class="paramname">object_subscriber</td><td>ROS2 subscription for the object information (position, velocity, and type) from the PosVelClass topic. </td></tr>
    <tr><td class="paramname">position_subscriber</td><td>ROS2 subscription for the current position of the robot from the RobotPos topic. </td></tr>
    <tr><td class="paramname">publisher</td><td>ROS2 publisher for the calculated velocity to the RobotCmd topic. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a6a21c8523b2a67b4e75756510f5e5e97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a21c8523b2a67b4e75756510f5e5e97">&#9670;&nbsp;</a></span>error_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def logic.logic.Controller.error_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Error callback function to get the error message and set the error variable to true if the function gets called. </p>
<p>This function gets called when an error message gets called and sets the error value to True. With the ROS2 logger the error message gets displayed on the terminal. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The error message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a021fc3633915f43d94fad0e797e91d39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a021fc3633915f43d94fad0e797e91d39">&#9670;&nbsp;</a></span>object_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def logic.logic.Controller.object_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Object callback function to get the object message and set the velocity in x direction to the negative value of the object velocity. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">time</td><td>Variable to save the time of the object callback. </td></tr>
    <tr><td class="paramname">msg</td><td>The object message. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab98931a0c7ac62034cc7e33e04fa37d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab98931a0c7ac62034cc7e33e04fa37d3">&#9670;&nbsp;</a></span>robotPosition_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def logic.logic.Controller.robotPosition_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg_in</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Robot position callback function to get the robot position message and set the robot position in dependence of the current state. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg_in</td><td>The robot position message.</td></tr>
  </table>
  </dd>
</dl>
<p>Cases: The robot moves to different positions in dependence of the current state.</p><ul>
<li>Case 'init' to move the step motor from the z-axis to the initialize position. The case publishes an updated new robot position that moves the robot for 10 seconds straight to the minimum border of the z-axis. After the 10 seconds, the z position is 0.0, and the next case 'reference_z' is called.</li>
<li>Case 'reference_z' to move the step motors from the x and y-axis to the initialize position. The case publishes an updated new robot position that moves the robot for 10 seconds straight to the minimum borders of the x and y-axis. After the 10 seconds, the x and y positions are set to 0.0, and a new robot position is published with the defined __wait position, which gets called after that.</li>
<li>Case 'wait' to move the robot to the defined robot waiting position. Since the wait position is already being published in the case 'reference_z', the robot moves without a new publish to the wait position. The robot waits until a new object is detected, and the vel_x is unequal to zero. After a new object is detected, the y and z values of the robot get updated, and the next case 'fetch_x' gets called. <br  />
</li>
<li>Case 'fetch_x' to move the robot along the x-axis to a target position. In the 'fetch_x' case, the robot is controlled to move along the x-axis to reach the object position. The robot trys to chatch the object on the conveyor belt by moving along the x-axis with the object velocity. If the robot can't catch the object, the robot moves to the wait position. If the robot catches the object, the robot moves to the Case 'lifting'.</li>
<li>Case 'lifting' to pick up the reached object and move the z-axis up. In the 'lifting' case, the robot picks up the reached object by moving the z-axis upwards until the value is greater than or equal to the wait position. After reaching the desired z position, the x position gets updated to the x position of the unicorn or cat box, depending on the lifted object type. The z position gets updated to the value where the y-axis is free to move, and the updated x and z positions get published. After publishing the new positions, the case 'y_enabling' is called.</li>
<li>Case 'y_enabling' moves the y position of the robot to the y position of the boxes. The y position gets updated after the z position reaches the position where y can move without any danger of crashing or losing the object. After that, the y and z positions are updated and published to the y and z positions of the object box. After the publish, the next case 'xy_moving' is called.</li>
<li>Case 'xy_moving' moves the robot over the object box and releases the vacuum to sort the object in the box. After the x and y positions are close enough to the desired position, the gripper releases the vacuum, and the current position is published with the updated gripper value. The x and y positions are updated and published to the wait position. The next case 'y_disabling' is called after the position is published.</li>
<li>Case y_disabling moves the z position to the wait position. After the robot is over the desired x and y position the z position is updated and published. The next case 'wait' gets called after publishing the new z positon.</li>
<li>Case 'error_z' If there is an error, the gripper set to False and the z axis moves to the z reference position by publishing the updated robot position. After publishing the case 'error_xy' gets called.</li>
<li>Case 'error_xy' moves the x and y axis to the reference position. After the z axis reaches the reference position the x and y position gets updated and the robot position is published. The next error case 'error' gets called after publishing.</li>
<li>Case 'error' checks if the x and y position is reached and calls the next case 'dead'</li>
<li>Casse 'dead' The placeholder pass gets called and after that the programm is in a dead state. </li>
</ul>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/juntj/RobotikProjekt3/ros2_workspace/src/logic/logic/logic.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
