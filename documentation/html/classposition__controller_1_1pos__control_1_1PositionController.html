<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: position_controller.pos_control.PositionController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>position_controller</b></li><li class="navelem"><b>pos_control</b></li><li class="navelem"><a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html">PositionController</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classposition__controller_1_1pos__control_1_1PositionController-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">position_controller.pos_control.PositionController Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A <a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html" title="A PositionController instance is used to create a ROS2 node for robot position control.">PositionController</a> instance is used to create a ROS2 node for robot position control.  
 <a href="classposition__controller_1_1pos__control_1_1PositionController.html#details">More...</a></p>
<div class="dynheader">
Inheritance diagram for position_controller.pos_control.PositionController:</div>
<div class="dyncontent">
<div class="center"><img src="classposition__controller_1_1pos__control_1_1PositionController__inherit__graph.png" border="0" usemap="#aposition__controller_8pos__control_8PositionController_inherit__map" alt="Inheritance graph"/></div>
<map name="aposition__controller_8pos__control_8PositionController_inherit__map" id="aposition__controller_8pos__control_8PositionController_inherit__map">
<area shape="rect" title="A PositionController instance is used to create a ROS2 node for robot position control." alt="" coords="5,80,180,121"/>
<area shape="rect" title=" " alt="" coords="66,5,119,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for position_controller.pos_control.PositionController:</div>
<div class="dyncontent">
<div class="center"><img src="classposition__controller_1_1pos__control_1_1PositionController__coll__graph.png" border="0" usemap="#aposition__controller_8pos__control_8PositionController_coll__map" alt="Collaboration graph"/></div>
<map name="aposition__controller_8pos__control_8PositionController_coll__map" id="aposition__controller_8pos__control_8PositionController_coll__map">
<area shape="rect" title="A PositionController instance is used to create a ROS2 node for robot position control." alt="" coords="5,80,180,121"/>
<area shape="rect" title=" " alt="" coords="66,5,119,32"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aaa305640768a851274f5fcd0a919e80c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html#aaa305640768a851274f5fcd0a919e80c">__init__</a> (self)</td></tr>
<tr class="memdesc:aaa305640768a851274f5fcd0a919e80c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes a new <a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html" title="A PositionController instance is used to create a ROS2 node for robot position control.">PositionController</a> instance.  <a href="classposition__controller_1_1pos__control_1_1PositionController.html#aaa305640768a851274f5fcd0a919e80c">More...</a><br /></td></tr>
<tr class="separator:aaa305640768a851274f5fcd0a919e80c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a697aa8ff28f3b80beb3830290ceae60d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html#a697aa8ff28f3b80beb3830290ceae60d">controllerCommand_callback</a> (self, msg)</td></tr>
<tr class="memdesc:a697aa8ff28f3b80beb3830290ceae60d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to get the desired X, Y and Z position and the offset for the x velocity.  <a href="classposition__controller_1_1pos__control_1_1PositionController.html#a697aa8ff28f3b80beb3830290ceae60d">More...</a><br /></td></tr>
<tr class="separator:a697aa8ff28f3b80beb3830290ceae60d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b82708e07c404c2da48a78fe6a676ec"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html#a1b82708e07c404c2da48a78fe6a676ec">robotPostion_callback</a> (self, msg)</td></tr>
<tr class="memdesc:a1b82708e07c404c2da48a78fe6a676ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to get the current position X, Y and Z and print the velocity in the consol.  <a href="classposition__controller_1_1pos__control_1_1PositionController.html#a1b82708e07c404c2da48a78fe6a676ec">More...</a><br /></td></tr>
<tr class="separator:a1b82708e07c404c2da48a78fe6a676ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a524fce8e0f9480b0b1bc5bc9b1c69931"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html#a524fce8e0f9480b0b1bc5bc9b1c69931">calculate_control_signal</a> (self)</td></tr>
<tr class="memdesc:a524fce8e0f9480b0b1bc5bc9b1c69931"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculates the new velocity for each step motor in dependence of the current position and the desired position.  <a href="classposition__controller_1_1pos__control_1_1PositionController.html#a524fce8e0f9480b0b1bc5bc9b1c69931">More...</a><br /></td></tr>
<tr class="separator:a524fce8e0f9480b0b1bc5bc9b1c69931"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A <a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html" title="A PositionController instance is used to create a ROS2 node for robot position control.">PositionController</a> instance is used to create a ROS2 node for robot position control. </p>
<p>The node subscribes the topic "robot_position" and "controller_command", calculates the new velocity for each step motor in dependence of the current position and the desired position and publishes the calculated velocity on the topic "robot_command".</p>
<p>The pos_control includes:</p><ul>
<li>Calculation of the new velocity for each step motor in dependence of the current position and the desired position.</li>
<li>Regulate the velocity to the maximum velocity.</li>
<li>Regulate the velocity jump to the maximum acceleration.</li>
<li>Publish the calculated velocity for each step motor and the grip value as a RobotCmd message. </li>
</ul>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aaa305640768a851274f5fcd0a919e80c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa305640768a851274f5fcd0a919e80c">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def position_controller.pos_control.PositionController.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes a new <a class="el" href="classposition__controller_1_1pos__control_1_1PositionController.html" title="A PositionController instance is used to create a ROS2 node for robot position control.">PositionController</a> instance. </p>
<p><br  />
 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">k</td><td>Proportional gain value for the velocity calculation. </td></tr>
    <tr><td class="paramname">max_vel</td><td>Array with three values for the maximum velocity of each step motor. </td></tr>
    <tr><td class="paramname">max_acc</td><td>Array with thee values for the maximum velocity of each step motor. </td></tr>
    <tr><td class="paramname">desired_pos</td><td>Desired position for each step motor. </td></tr>
    <tr><td class="paramname">current_pos</td><td>Current position for each step motor. </td></tr>
    <tr><td class="paramname">velocity</td><td>Current velocity for each step motor. </td></tr>
    <tr><td class="paramname">vel_x_offset</td><td>Offset for the x velocity. </td></tr>
    <tr><td class="paramname">grip</td><td>Boolean value to control the robot gripper. </td></tr>
    <tr><td class="paramname">subscriptionCurrent</td><td>ROS2 subscription for the current position of the robot from the RobotPos topic. </td></tr>
    <tr><td class="paramname">subscriptionDesired</td><td>ROS2 subscription for the desired position of the robot from the ConCmd topic. </td></tr>
    <tr><td class="paramname">publisher</td><td>ROS2 publisher for the calculated velocity to the RobotCmd topic. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a524fce8e0f9480b0b1bc5bc9b1c69931"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a524fce8e0f9480b0b1bc5bc9b1c69931">&#9670;&nbsp;</a></span>calculate_control_signal()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def position_controller.pos_control.PositionController.calculate_control_signal </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculates the new velocity for each step motor in dependence of the current position and the desired position. </p>
<p>For the velocity in x direction the offset has to be added because with this the system is in rest position. The velocity is set to the maximum velocity when the velocity is higher than the maximum velocity. The velocity is set to the maximum acceleration when the velocity jump is higher than the maximum acceleration. </p><dl class="section return"><dt>Returns</dt><dd>robot_command Returns the calculated velocity for each step motor and the grip value as a RobotCmd message. </dd></dl>

</div>
</div>
<a id="a697aa8ff28f3b80beb3830290ceae60d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a697aa8ff28f3b80beb3830290ceae60d">&#9670;&nbsp;</a></span>controllerCommand_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def position_controller.pos_control.PositionController.controllerCommand_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function to get the desired X, Y and Z position and the offset for the x velocity. </p>
<p>The grip value is set to the desired grip value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The ConCmd message containing the desired position and velocity offset. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b82708e07c404c2da48a78fe6a676ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b82708e07c404c2da48a78fe6a676ec">&#9670;&nbsp;</a></span>robotPostion_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">def position_controller.pos_control.PositionController.robotPostion_callback </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback function to get the current position X, Y and Z and print the velocity in the consol. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The RobotPos message containing the current position. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>robot_command returns the calculated velocity for each step motor and the grip value as a RobotCmd message. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/juntj/RobotikProjekt3/ros2_workspace/src/position_controller/position_controller/pos_control.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
